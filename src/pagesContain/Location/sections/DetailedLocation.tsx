import Breadcrumb from '@/components/Breadcrumb'
import Schedules from '@/components/Schedules/Schedules';
import apihandler from '@/lib/apihandler';
import formatTime from '@/lib/formatTime';
import { LocationDataType } from '@/types/type';
import Image from 'next/image';
import React from 'react'

const DetailedLocation = async({params}:{params:string}) => {
    const locationDetail = await apihandler({
        path: "/api/location_list",
        apiConfig: { method: "POST" ,
            body: JSON.stringify({ slug: params }),
            headers: {
                'content-type': 'application/json'
            }
        },
      });
  return (
   <>
    {
                locationDetail?.data?.map((location:LocationDataType, index:number) => {

                    return (

                        <div className='pt-24' key={index}>
                            <Breadcrumb menu="locations" submenu={location.title} />

                            <div className='container mt-7 flex flex-col-reverse lg:flex-row gap-5'>
                                <div className='flex-1'>
                                    <h1 className='text-2xl md:text-4xl font-bold'>{location.title}</h1>
                                    <p className='my-6'>{location.description}</p>
                                    <div className='border border-[#EEEEEE] rounded-md max-w-96 p-3 text-sm'>
                                        <div className="flex gap-2 mt-2">
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                width="25"
                                                height="24"
                                                viewBox="0 0 25 24"
                                                fill="none"
                                                id="img"
                                            >
                                                <g clipPath="url(#clip0_913_7637)">
                                                    <path
                                                        d="M12.5 20.8999L17.45 15.9499C18.4289 14.9709 19.0955 13.7236 19.3656 12.3658C19.6356 11.0079 19.4969 9.60052 18.9671 8.32148C18.4373 7.04244 17.54 5.94923 16.3889 5.18009C15.2378 4.41095 13.8844 4.00043 12.5 4.00043C11.1156 4.00043 9.76222 4.41095 8.61109 5.18009C7.45996 5.94923 6.56275 7.04244 6.03292 8.32148C5.50308 9.60052 5.36442 11.0079 5.63445 12.3658C5.90449 13.7236 6.57111 14.9709 7.55 15.9499L12.5 20.8999ZM12.5 23.7279L6.136 17.3639C4.87734 16.1052 4.02019 14.5016 3.67293 12.7558C3.32567 11.0099 3.50391 9.20035 4.1851 7.55582C4.86629 5.91129 6.01984 4.50569 7.49988 3.51677C8.97992 2.52784 10.72 2 12.5 2C14.28 2 16.0201 2.52784 17.5001 3.51677C18.9802 4.50569 20.1337 5.91129 20.8149 7.55582C21.4961 9.20035 21.6743 11.0099 21.3271 12.7558C20.9798 14.5016 20.1227 16.1052 18.864 17.3639L12.5 23.7279ZM12.5 12.9999C13.0304 12.9999 13.5391 12.7892 13.9142 12.4141C14.2893 12.0391 14.5 11.5304 14.5 10.9999C14.5 10.4695 14.2893 9.96078 13.9142 9.58571C13.5391 9.21064 13.0304 8.99992 12.5 8.99992C11.9696 8.99992 11.4609 9.21064 11.0858 9.58571C10.7107 9.96078 10.5 10.4695 10.5 10.9999C10.5 11.5304 10.7107 12.0391 11.0858 12.4141C11.4609 12.7892 11.9696 12.9999 12.5 12.9999ZM12.5 14.9999C11.4391 14.9999 10.4217 14.5785 9.67158 13.8283C8.92143 13.0782 8.5 12.0608 8.5 10.9999C8.5 9.93906 8.92143 8.92164 9.67158 8.17149C10.4217 7.42135 11.4391 6.99992 12.5 6.99992C13.5609 6.99992 14.5783 7.42135 15.3284 8.17149C16.0786 8.92164 16.5 9.93906 16.5 10.9999C16.5 12.0608 16.0786 13.0782 15.3284 13.8283C14.5783 14.5785 13.5609 14.9999 12.5 14.9999Z"
                                                        fill="currentColor"
                                                    />
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_913_7637">
                                                        <rect
                                                            width="24"
                                                            height="24"
                                                            fill="white"
                                                            transform="translate(0.5)"
                                                        />
                                                    </clipPath>
                                                </defs>
                                            </svg>
                                            {location.address}
                                        </div>
                                        <div className="flex gap-2 mt-2">
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                width="25"
                                                height="25"
                                                viewBox="0 0 25 25"
                                                fill="none"
                                                id="img"
                                            >
                                                <g clipPath="url(#clip0_1327_17175)">
                                                    <path
                                                        d="M3.5 3.56299H21.5C21.7652 3.56299 22.0196 3.66835 22.2071 3.85588C22.3946 4.04342 22.5 4.29777 22.5 4.56299V20.563C22.5 20.8282 22.3946 21.0826 22.2071 21.2701C22.0196 21.4576 21.7652 21.563 21.5 21.563H3.5C3.23478 21.563 2.98043 21.4576 2.79289 21.2701C2.60536 21.0826 2.5 20.8282 2.5 20.563V4.56299C2.5 4.29777 2.60536 4.04342 2.79289 3.85588C2.98043 3.66835 3.23478 3.56299 3.5 3.56299ZM20.5 7.80099L12.572 14.901L4.5 7.77899V19.563H20.5V7.80099ZM5.011 5.56299L12.561 12.225L20.002 5.56299H5.011Z"
                                                        fill="currentColor"
                                                    />
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_1327_17175">
                                                        <rect
                                                            width="24"
                                                            height="24"
                                                            fill="white"
                                                            transform="translate(0.5 0.562988)"
                                                        />
                                                    </clipPath>
                                                </defs>
                                            </svg>
                                            {location.email}
                                        </div>
                                        <div className="flex gap-2 mt-2">
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                width="25"
                                                height="25"
                                                viewBox="0 0 25 25"
                                                fill="none"
                                                id="img"
                                            >
                                                <g clipPath="url(#clip0_1327_17180)">
                                                    <path
                                                        d="M9.866 11.245C10.8043 12.8935 12.1695 14.2587 13.818 15.197L14.702 13.959C14.8442 13.7599 15.0543 13.6199 15.2928 13.5653C15.5313 13.5108 15.7814 13.5455 15.996 13.663C17.4103 14.4359 18.9722 14.9008 20.579 15.027C20.8298 15.0469 21.0638 15.1605 21.2345 15.3453C21.4052 15.5301 21.5 15.7724 21.5 16.024V20.486C21.5001 20.7336 21.4083 20.9724 21.2424 21.1562C21.0765 21.34 20.8483 21.4557 20.602 21.481C20.072 21.536 19.538 21.563 19 21.563C10.44 21.563 3.5 14.623 3.5 6.06299C3.5 5.52499 3.527 4.99099 3.582 4.46099C3.60725 4.21469 3.72298 3.98651 3.90679 3.82062C4.0906 3.65474 4.32941 3.56293 4.577 3.56299H9.039C9.29056 3.56296 9.5329 3.65774 9.71768 3.82844C9.90247 3.99914 10.0161 4.23321 10.036 4.48399C10.1622 6.09078 10.6271 7.65267 11.4 9.06699C11.5175 9.28155 11.5522 9.53173 11.4977 9.77018C11.4431 10.0086 11.3031 10.2188 11.104 10.361L9.866 11.245ZM7.344 10.588L9.244 9.23099C8.70478 8.06708 8.33535 6.83183 8.147 5.56299H5.51C5.504 5.72899 5.501 5.89599 5.501 6.06299C5.5 13.519 11.544 19.563 19 19.563C19.167 19.563 19.334 19.56 19.5 19.553V16.916C18.2312 16.7276 16.9959 16.3582 15.832 15.819L14.475 17.719C13.9287 17.5067 13.398 17.2561 12.887 16.969L12.829 16.936C10.8676 15.8197 9.24328 14.1954 8.127 12.234L8.094 12.176C7.80691 11.665 7.55628 11.1343 7.344 10.588Z"
                                                        fill="currentColor"
                                                    />
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_1327_17180">
                                                        <rect
                                                            width="24"
                                                            height="24"
                                                            fill="white"
                                                            transform="translate(0.5 0.562988)"
                                                        />
                                                    </clipPath>
                                                </defs>
                                            </svg>
                                            {location.phone_number}
                                        </div>
                                        <div className="flex gap-2 mt-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" id="img">
                                                <g clipPath="url(#clip0_913_7530)">
                                                    <path d="M12.5 22C6.977 22 2.5 17.523 2.5 12C2.5 6.477 6.977 2 12.5 2C18.023 2 22.5 6.477 22.5 12C22.5 17.523 18.023 22 12.5 22ZM12.5 20C14.6217 20 16.6566 19.1571 18.1569 17.6569C19.6571 16.1566 20.5 14.1217 20.5 12C20.5 9.87827 19.6571 7.84344 18.1569 6.34315C16.6566 4.84285 14.6217 4 12.5 4C10.3783 4 8.34344 4.84285 6.84315 6.34315C5.34285 7.84344 4.5 9.87827 4.5 12C4.5 14.1217 5.34285 16.1566 6.84315 17.6569C8.34344 19.1571 10.3783 20 12.5 20ZM13.5 12H17.5V14H11.5V7H13.5V12Z" fill="currentColor" />
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_913_7530">
                                                        <rect width="24" height="24" fill="white" transform="translate(0.5)" />
                                                    </clipPath>
                                                </defs>
                                            </svg>
                                            <details>
                                                <summary>Opening hours</summary>
                                                <div>
                                                    {location?.location_time?.map((time, index) => (
                                                        <p className='mt-2' key={index}>{time.day}: <span>{formatTime(time.start_time,time.end_time)}</span></p>
                                                    ))}

                                                    <p className='font-bold text-primaryBlue mt-3'> Public Holidays: open as per weekend hours 
                                                      </p>
                                                </div>
                                            </details>
                                        </div>

                                    </div>
                                    <div className='mt-5'>
                                        <button className='button flex gap-3'><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none" id="img">
                                            <g clipPath="url(#clip0_1327_17185)">
                                                <path d="M7.75301 19.057L8.47701 19.48C9.69795 20.1921 11.0866 20.5659 12.5 20.563C14.0823 20.563 15.629 20.0938 16.9446 19.2147C18.2602 18.3357 19.2855 17.0863 19.8911 15.6245C20.4966 14.1626 20.655 12.5541 20.3463 11.0023C20.0376 9.45042 19.2757 8.02495 18.1569 6.90613C17.038 5.78731 15.6126 5.02539 14.0607 4.71671C12.5089 4.40802 10.9004 4.56645 9.43855 5.17195C7.97674 5.77745 6.72731 6.80283 5.84826 8.11843C4.96921 9.43402 4.50001 10.9807 4.50001 12.563C4.50001 13.999 4.87701 15.376 5.58401 16.587L6.00601 17.311L5.35301 19.712L7.75301 19.057ZM2.50401 22.563L3.85601 17.595C2.96515 16.0678 2.49711 14.331 2.50001 12.563C2.50001 7.03999 6.97701 2.56299 12.5 2.56299C18.023 2.56299 22.5 7.03999 22.5 12.563C22.5 18.086 18.023 22.563 12.5 22.563C10.7328 22.5658 8.99667 22.0982 7.47001 21.208L2.50401 22.563ZM8.89101 7.87099C9.02501 7.86099 9.16001 7.86099 9.29401 7.86699C9.34801 7.87099 9.40201 7.87699 9.45601 7.88299C9.61501 7.90099 9.79001 7.99799 9.84901 8.13199C10.147 8.80799 10.437 9.48899 10.717 10.172C10.779 10.324 10.742 10.519 10.624 10.709C10.5429 10.8375 10.4551 10.9616 10.361 11.081C10.248 11.226 10.005 11.492 10.005 11.492C10.005 11.492 9.90601 11.61 9.94401 11.757C9.95801 11.813 10.004 11.894 10.046 11.962L10.105 12.057C10.361 12.484 10.705 12.917 11.125 13.325C11.245 13.441 11.362 13.56 11.488 13.671C11.956 14.084 12.486 14.421 13.058 14.671L13.063 14.673C13.148 14.71 13.191 14.73 13.315 14.783C13.377 14.809 13.441 14.832 13.506 14.849C13.5732 14.8661 13.6439 14.8629 13.7093 14.8397C13.7746 14.8166 13.8316 14.7746 13.873 14.719C14.597 13.842 14.663 13.785 14.669 13.785V13.787C14.7193 13.7401 14.7791 13.7045 14.8443 13.6826C14.9095 13.6607 14.9786 13.653 15.047 13.66C15.107 13.664 15.168 13.675 15.224 13.7C15.755 13.943 16.624 14.322 16.624 14.322L17.206 14.583C17.304 14.63 17.393 14.741 17.396 14.848C17.4 14.915 17.406 15.023 17.383 15.221C17.351 15.48 17.273 15.791 17.195 15.954C17.1416 16.0652 17.0707 16.1672 16.985 16.256C16.8841 16.3619 16.7736 16.4583 16.655 16.544C16.614 16.5749 16.5723 16.6049 16.53 16.634C16.4056 16.7129 16.2778 16.7863 16.147 16.854C15.8895 16.9907 15.6052 17.0693 15.314 17.084C15.129 17.094 14.944 17.108 14.758 17.098C14.75 17.098 14.19 17.011 14.19 17.011C12.7683 16.637 11.4534 15.9365 10.35 14.965C10.124 14.766 9.91501 14.552 9.70101 14.339C8.81101 13.454 8.13901 12.499 7.73101 11.597C7.52218 11.1543 7.40938 10.6724 7.40001 10.183C7.39589 9.57584 7.59436 8.98465 7.96401 8.50299C8.03701 8.40899 8.10601 8.31099 8.22501 8.19799C8.35201 8.07799 8.43201 8.01399 8.51901 7.96999C8.63469 7.91202 8.76088 7.87801 8.89001 7.86999L8.89101 7.87099Z" fill="currentColor" />
                                            </g>
                                            <defs>
                                                <clipPath id="clip0_1327_17185">
                                                    <rect width="24" height="24" fill="white" transform="translate(0.5 0.562988)" />
                                                </clipPath>
                                            </defs>
                                        </svg>Enquire now</button>
                                    </div>

                                </div>
                                <div className='h-[500px] flex-1     flex justify-center  items-center  rounded-2xl '>
                                    <Image width={500} height={500} src={location.image_url} alt={location.title}  className="rounded-2xl object-cover w-[500px] h-[500px]" />
                                </div>
                            </div>
                            <Schedules location={location.title}/>
                        </div>

                    )
                })
            }
   </>
  )
}

export default DetailedLocation